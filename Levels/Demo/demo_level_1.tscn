[gd_scene load_steps=15 format=3 uid="uid://brxjit2vqh2vw"]

[ext_resource type="PackedScene" uid="uid://i6ex30grw0hx" path="res://Player/player.tscn" id="1_6o2fb"]
[ext_resource type="PackedScene" uid="uid://do34rfdceqm35" path="res://Interactables/Walls/WallTriple/wall_triple.tscn" id="1_c37p1"]
[ext_resource type="PackedScene" uid="uid://bqsj8ui1l3hpn" path="res://Interactables/Walls/WallUnit/wall.tscn" id="2_6jb11"]
[ext_resource type="PackedScene" uid="uid://ced5pa85yno3j" path="res://Interactables/item.tscn" id="2_6wfp5"]
[ext_resource type="PackedScene" uid="uid://ceoon7ato0vks" path="res://Interactables/Platforms/moving_platform.tscn" id="5_1jh2r"]
[ext_resource type="PackedScene" uid="uid://c64jcf0ymuq23" path="res://Interactables/pressure_plate.tscn" id="5_rwkgx"]
[ext_resource type="PackedScene" uid="uid://dku2bheu347re" path="res://Interactables/Platforms/rotating_platform.tscn" id="6_mqbjj"]

[sub_resource type="PlaneMesh" id="PlaneMesh_456w6"]
size = Vector2(20, 20)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_0eruu"]
points = PackedVector3Array(-10, 0, -10, -10, 0, 10, 10, 0, -10, 10, 0, 10)

[sub_resource type="BoxMesh" id="BoxMesh_8bcvv"]

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_qsior"]
points = PackedVector3Array(0.5, 0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, -0.5, -0.5, -0.5)

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_40tqc"]
sky_top_color = Color(0.239216, 0.454902, 0.698039, 1)
sky_horizon_color = Color(0.686275, 0.254902, 0.541176, 1)

[sub_resource type="Sky" id="Sky_u803x"]
sky_material = SubResource("ProceduralSkyMaterial_40tqc")

[sub_resource type="Environment" id="Environment_nux6p"]
background_mode = 2
sky = SubResource("Sky_u803x")

[node name="Demo_Level1" type="Node3D"]

[node name="Geometry" type="Node3D" parent="."]

[node name="Floor" type="StaticBody3D" parent="Geometry"]

[node name="MeshInstance3D" type="MeshInstance3D" parent="Geometry/Floor"]
mesh = SubResource("PlaneMesh_456w6")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Geometry/Floor"]
shape = SubResource("ConvexPolygonShape3D_0eruu")

[node name="Floor2" type="StaticBody3D" parent="Geometry"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -20)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Geometry/Floor2"]
mesh = SubResource("PlaneMesh_456w6")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Geometry/Floor2"]
shape = SubResource("ConvexPolygonShape3D_0eruu")

[node name="Floor3" type="StaticBody3D" parent="Geometry"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 20, 0, -20)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Geometry/Floor3"]
mesh = SubResource("PlaneMesh_456w6")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Geometry/Floor3"]
shape = SubResource("ConvexPolygonShape3D_0eruu")

[node name="Walls" type="Node3D" parent="Geometry"]

[node name="WallTriple" parent="Geometry/Walls" instance=ExtResource("1_c37p1")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 7, 0, 10)

[node name="WallTriple2" parent="Geometry/Walls" instance=ExtResource("1_c37p1")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 10, 0, 7)

[node name="WallTriple3" parent="Geometry/Walls" instance=ExtResource("1_c37p1")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 0, 10)

[node name="WallTriple4" parent="Geometry/Walls" instance=ExtResource("1_c37p1")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 10, 0, 1)

[node name="WallTriple5" parent="Geometry/Walls" instance=ExtResource("1_c37p1")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 10, 0, -5)

[node name="WallTriple6" parent="Geometry/Walls" instance=ExtResource("1_c37p1")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 10, 0, -11)

[node name="WallTriple7" parent="Geometry/Walls" instance=ExtResource("1_c37p1")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 10, 0, -17)

[node name="WallTriple9" parent="Geometry/Walls" instance=ExtResource("1_c37p1")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 10, 0, -29)

[node name="WallTriple10" parent="Geometry/Walls" instance=ExtResource("1_c37p1")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -10, 0, 7)

[node name="WallTriple11" parent="Geometry/Walls" instance=ExtResource("1_c37p1")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -10, 0, 1)

[node name="WallTriple12" parent="Geometry/Walls" instance=ExtResource("1_c37p1")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -10, 0, -5)

[node name="WallTriple13" parent="Geometry/Walls" instance=ExtResource("1_c37p1")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -10, 0, -11)

[node name="WallTriple14" parent="Geometry/Walls" instance=ExtResource("1_c37p1")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -10, 0, -17)

[node name="WallTriple15" parent="Geometry/Walls" instance=ExtResource("1_c37p1")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -10, 0, -23)

[node name="WallTriple16" parent="Geometry/Walls" instance=ExtResource("1_c37p1")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -10, 0, -29)

[node name="WallTriple17" parent="Geometry/Walls" instance=ExtResource("1_c37p1")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5, 0, 10)

[node name="WallTriple18" parent="Geometry/Walls" instance=ExtResource("1_c37p1")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -11, 0, 10)

[node name="WallTriple19" parent="Geometry/Walls" instance=ExtResource("1_c37p1")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 7, 0, -30)

[node name="WallTriple20" parent="Geometry/Walls" instance=ExtResource("1_c37p1")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 0, -30)

[node name="WallTriple21" parent="Geometry/Walls" instance=ExtResource("1_c37p1")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5, 0, -30)

[node name="WallTriple22" parent="Geometry/Walls" instance=ExtResource("1_c37p1")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -11, 0, -30)

[node name="Room1" type="Node3D" parent="Geometry"]

[node name="WallTriple" parent="Geometry/Room1" instance=ExtResource("1_c37p1")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 7, 0, 0)

[node name="WallTriple2" parent="Geometry/Room1" instance=ExtResource("1_c37p1")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1, 0, 0)

[node name="WallTriple3" parent="Geometry/Room1" instance=ExtResource("1_c37p1")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -7, 0, 0)

[node name="Wall" parent="Geometry/Room1" instance=ExtResource("2_6jb11")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3, 0, 0)
door = true
close_when_passed = true

[node name="Item" parent="Geometry/Room1" instance=ExtResource("2_6wfp5")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2, 5)

[node name="PressurePlate" parent="Geometry/Room1" instance=ExtResource("5_rwkgx")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.00032, 0.201822, 6.05885)

[node name="Room2" type="Node3D" parent="Geometry"]

[node name="WallTriple" parent="Geometry/Room2" instance=ExtResource("1_c37p1")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -7, 0, -4)

[node name="Wall" parent="Geometry/Room2" instance=ExtResource("2_6jb11")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -4, 0, -1)

[node name="Wall2" parent="Geometry/Room2" instance=ExtResource("2_6jb11")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -4, 0, -3)
door = true

[node name="Item2" parent="Geometry/Room2" instance=ExtResource("2_6wfp5")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 9, 2, -1)

[node name="Item3" parent="Geometry/Room2" instance=ExtResource("2_6wfp5")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4.70236, 2.05084, -0.790732)

[node name="PressurePlate" parent="Geometry/Room2" instance=ExtResource("5_rwkgx")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5, 0, -9)

[node name="PressurePlate2" parent="Geometry/Room2" instance=ExtResource("5_rwkgx")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5, 0, -4)

[node name="WallTriple2" parent="Geometry/Room2" instance=ExtResource("1_c37p1")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -9, 0, -12)

[node name="WallTriple3" parent="Geometry/Room2" instance=ExtResource("1_c37p1")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -4, 0, -9)

[node name="Wall3" parent="Geometry/Room2" instance=ExtResource("2_6jb11")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -4, 0, -5)
door = true

[node name="Wall4" parent="Geometry/Room2" instance=ExtResource("2_6jb11")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5, 0, -12)
door = true
close_when_passed = true

[node name="WallTriple4" parent="Geometry/Room2" instance=ExtResource("1_c37p1")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1, 0, -12)

[node name="WallTriple5" parent="Geometry/Room2" instance=ExtResource("1_c37p1")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5, 0, -12)

[node name="WallTriple6" parent="Geometry/Room2" instance=ExtResource("1_c37p1")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 11, 0, -12)

[node name="Room3" type="Node3D" parent="Geometry"]

[node name="WallTriple" parent="Geometry/Room3" instance=ExtResource("1_c37p1")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 7, 0, -26)

[node name="WallTriple2" parent="Geometry/Room3" instance=ExtResource("1_c37p1")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 7, 0, -20)

[node name="StaticBody3D" type="StaticBody3D" parent="Geometry/Room3"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -9.40869, 4.7009, -20.8397)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Geometry/Room3/StaticBody3D"]
mesh = SubResource("BoxMesh_8bcvv")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Geometry/Room3/StaticBody3D"]
shape = SubResource("ConvexPolygonShape3D_qsior")

[node name="Item" parent="Geometry/Room3" instance=ExtResource("2_6wfp5")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -9.31729, 5.72658, -20.8435)

[node name="MovingPlatform" parent="Geometry/Room3" instance=ExtResource("5_1jh2r")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -9, 0, -28)
move_destination_relative = Vector3(0, 4, 0)

[node name="RotatingPlatform" parent="Geometry/Room3" instance=ExtResource("6_mqbjj")]
transform = Transform3D(-1, 0, -2.62268e-07, 0, 1, 0, 2.62268e-07, 0, -1, -10, 4, -24)
start_rotation = 90.0
end_rotation = 180.0
rotation_speed = 2.0

[node name="PressurePlate" parent="Geometry/Room3" instance=ExtResource("5_rwkgx")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2, 0, -23)

[node name="PressurePlate2" parent="Geometry/Room3" instance=ExtResource("5_rwkgx")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -9, 0, -24)

[node name="Wall" parent="Geometry/Room3" instance=ExtResource("2_6jb11")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 4, 0, -23)
door = true
start_open = true

[node name="Wall2" parent="Geometry/Room3" instance=ExtResource("2_6jb11")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 10, 0, -23)
door = true

[node name="Wall3" parent="Geometry/Room3" instance=ExtResource("2_6jb11")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 4, 0, -21)

[node name="Wall4" parent="Geometry/Room3" instance=ExtResource("2_6jb11")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 4, 0, -25)

[node name="Wall5" parent="Geometry/Room3" instance=ExtResource("2_6jb11")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 10, 0, -25)

[node name="Wall6" parent="Geometry/Room3" instance=ExtResource("2_6jb11")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 10, 0, -21)

[node name="Item2" parent="Geometry/Room3" instance=ExtResource("2_6wfp5")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.38378, 5.72658, -15.4949)

[node name="Item3" parent="Geometry/Room3" instance=ExtResource("2_6wfp5")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.38378, 5.72658, -20.4949)

[node name="StaticBody3D2" type="StaticBody3D" parent="Geometry/Room3"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -9.40869, 5.58972, -19.6433)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Geometry/Room3/StaticBody3D2"]
mesh = SubResource("BoxMesh_8bcvv")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Geometry/Room3/StaticBody3D2"]
shape = SubResource("ConvexPolygonShape3D_qsior")

[node name="StaticBody3D3" type="StaticBody3D" parent="Geometry/Room3"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -8.18217, 5.80821, -20.8397)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Geometry/Room3/StaticBody3D3"]
mesh = SubResource("BoxMesh_8bcvv")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Geometry/Room3/StaticBody3D3"]
shape = SubResource("ConvexPolygonShape3D_qsior")

[node name="PressurePlate3" parent="Geometry/Room3" instance=ExtResource("5_rwkgx")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4, 0, -28)

[node name="StaticBody3D4" type="StaticBody3D" parent="Geometry/Room3"]
transform = Transform3D(1, 0, 0, 0, 8.22715, 0, 0, 0, 5.1, -3.62135, 5.80797, -23.0899)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Geometry/Room3/StaticBody3D4"]
mesh = SubResource("BoxMesh_8bcvv")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Geometry/Room3/StaticBody3D4"]
shape = SubResource("ConvexPolygonShape3D_qsior")

[node name="StaticBody3D5" type="StaticBody3D" parent="Geometry/Room3"]
transform = Transform3D(0.707107, -0.707107, 0, 0.707107, 0.707107, 0, 0, 0, 3.39606, -6.81727, -0.0630738, -23.9699)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Geometry/Room3/StaticBody3D5"]
mesh = SubResource("BoxMesh_8bcvv")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Geometry/Room3/StaticBody3D5"]
shape = SubResource("ConvexPolygonShape3D_qsior")

[node name="Player" parent="." instance=ExtResource("1_6o2fb")]
transform = Transform3D(-0.5, 0, -0.866025, 0, 1, 0, 0.866025, 0, -0.5, -6.2206, 0.157236, 5.7533)

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.5, 0.866025, 0, -0.866025, 0.5, -14.9763, 0, 0)

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_nux6p")

[connection signal="_state_changed" from="Geometry/Room1/PressurePlate" to="Geometry/Room1/Wall" method="_on_pressure_plate__state_changed"]
[connection signal="_state_changed" from="Geometry/Room2/PressurePlate" to="Geometry/Room2/Wall2" method="_on_pressure_plate__state_changed"]
[connection signal="_state_changed" from="Geometry/Room2/PressurePlate" to="Geometry/Room2/Wall4" method="_on_pressure_plate__state_changed"]
[connection signal="_state_changed" from="Geometry/Room2/PressurePlate2" to="Geometry/Room2/Wall3" method="_on_pressure_plate_2__state_changed"]
[connection signal="_state_changed" from="Geometry/Room3/PressurePlate" to="Geometry/Room3/RotatingPlatform" method="_on_pressure_plate__state_changed"]
[connection signal="_state_changed" from="Geometry/Room3/PressurePlate2" to="Geometry/Room3/Wall" method="_on_pressure_plate_2__state_changed"]
[connection signal="_state_changed" from="Geometry/Room3/PressurePlate2" to="Geometry/Room3/Wall2" method="_on_pressure_plate_2__state_changed"]
[connection signal="_state_changed" from="Geometry/Room3/PressurePlate3" to="Geometry/Room3/MovingPlatform" method="_on_pressure_plate_3__state_changed"]
